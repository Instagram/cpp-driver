<!DOCTYPE html>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="DataStax C++ Driver for Apache Cassandra Documentation">
    <meta name="author" content="DataStax">

    <title>DataStax C/C++ Driver - Home</title>

    <link rel="icon" href="../favicon.ico">
    <link rel="apple-touch-icon" href="../favicon.png">
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <link href="../css/hotkeys.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body ng-app="docs" data-spy="scroll" data-target=".side-nav">
    <header class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="./">DataStax C/C++ Driver</a>
        </div>
        <div class="collapse navbar-collapse" ng-controller="search">
          <ul class="nav navbar-nav">
            
            
            
            <li>
              <a href="topics/">Topics</a>
            </li>
            
            
            <li>
              <a href="api/">API docs</a>
            </li>
            
          </ul>
          <form class="navbar-form form-search navbar-right dropdown visible-lg-block" ng-class="{open: hasResults}" role="search" ng-submit="submit()">
            <div class="form-group has-feedback">
              <input type="search" class="form-control input-sm mousetrap" placeholder="Search..." ng-model="q" ng-change="search('v1.0')" ng-disabled="!searchReady" disabled data-hotkey="{down: moveDown, up: moveUp, esc: reset}" data-search>
            </div>
            <ul class="dropdown-menu" role="menu">
              <li ng-repeat="result in results" ng-class="{'bg-warning': $index == current}"><a ng-href="{{basePath}}{{result.path}}"><span ng-bind-html="summary(result)"></span></a></li>
            </ul>
          </form>
        </div>
      </div>
    </header>

    <div class="container" id="content">
      <div class="row">
        <div class="col-md-9 content">
          <nav class="crumbs">
            <ol class="breadcrumb">
              
              <li>
                <div class="dropdown">
                  <button id="current-version" class="btn btn-default btn-sm" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    v1.0
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="current-version">
                  
                    <li><a href="../">v2.1</a></li>
                  
                    <li><a href="../v2.0/">v2.0</a></li>
                  
                    <li class="disabled"><a href="./">v1.0</a></li>
                  
                  </ul>
                </div>
              </li>
              
              
              
              
              <li class="active">Home</li>
              
              
              
            </ol>
          </nav>
          

<h1 id="data-stax-c-c-driver-for-apache-cassandra">DataStax C/C++ Driver for Apache Cassandra<a class="anchor" href="#data-stax-c-c-driver-for-apache-cassandra" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h1>

<p><a href="https://travis-ci.org/datastax/cpp-driver"><img src="https://travis-ci.org/datastax/cpp-driver.svg?branch=1.0" alt="Build Status"></a></p>

<p>A C/C++ client driver for Apache Cassandra. This driver works exclusively with
the Cassandra Query Language version 3 (CQL3) and Cassandra’s Native Protocol (version 1 and 2).</p>

<ul>
<li>Code: <a href="https://github.com/datastax/cpp-driver">https://github.com/datastax/cpp-driver</a>
</li>
<li>Docs: <a href="http://datastax.github.io/cpp-driver">http://datastax.github.io/cpp-driver</a>
</li>
<li>JIRA: <a href="https://datastax-oss.atlassian.net/browse/CPP">https://datastax-oss.atlassian.net/browse/CPP</a>
</li>
<li>Mailing List: <a href="https://groups.google.com/a/lists.datastax.com/forum/#!forum/cpp-driver-user">https://groups.google.com/a/lists.datastax.com/forum/#!forum/cpp-driver-user</a>
</li>
<li>IRC: <a href="http://webchat.freenode.net/?channels=datastax-drivers">#datastax-drivers on <code>irc.freenode.net &lt;http://freenode.net&gt;</code></a>
</li>
</ul>

<h2 id="functionality">Functionality<a class="anchor" href="#functionality" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>

<ul>
<li>Completely asynchronous</li>
<li>Exception safe</li>
<li>Ad-hoc queries</li>
<li>Prepared statements</li>
<li>Batch statements</li>
<li>Connection pool with auto-reconnect</li>
<li>Cassandra collections</li>
<li>Compatibility with binary protcol version 1 and 2</li>
<li>Authentication (via credentials using SASL PLAIN)</li>
<li>SSL</li>
</ul>

<h2 id="upgrading-from-a-beta-to-a-rc-release">Upgrading from a Beta to a RC Release<a class="anchor" href="#upgrading-from-a-beta-to-a-rc-release" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>

<p>There were a couple breaking API changes between beta5 and rc1 that are documented in detail <a href="http://www.datastax.com/dev/blog/datastax-c-driver-rc1-released">here</a>.</p>

<h2 id="examples">Examples<a class="anchor" href="#examples" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>

<p>There are several examples provided here: <a href="https://github.com/datastax/cpp-driver/tree/1.0/examples">examples</a>.</p>

<h2 id="a-simple-example">A Simple Example<a class="anchor" href="#a-simple-example" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>
<pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt;
#include &lt;cassandra.h&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="cm">/* Setup and connect to cluster */</span>
  <span class="nc">CassFuture</span><span class="o">*</span> <span class="n">connect_future</span> <span class="o">=</span> <span class="nx">NULL</span><span class="p">;</span>
  <span class="nc">CassCluster</span><span class="o">*</span> <span class="n">cluster</span> <span class="o">=</span> <span class="nb">cass_cluster_new</span><span class="p">();</span>
  <span class="nc">CassSession</span><span class="o">*</span> <span class="n">session</span> <span class="o">=</span> <span class="nb">cass_session_new</span><span class="p">();</span>

  <span class="cm">/* Add contact points */</span>
  <span class="nb">cass_cluster_set_contact_points</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span> <span class="s">"127.0.0.1,127.0.0.2,127.0.0.3"</span><span class="p">);</span>

  <span class="cm">/* Provide the cluster object as configuration to connect the session */</span>
  <span class="n">connect_future</span> <span class="o">=</span> <span class="nb">cass_session_connect</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">cluster</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nb">cass_future_error_code</span><span class="p">(</span><span class="n">connect_future</span><span class="p">)</span> <span class="o">==</span> <span class="n">CASS_OK</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">CassFuture</span><span class="o">*</span> <span class="n">close_future</span> <span class="o">=</span> <span class="nx">NULL</span><span class="p">;</span>

    <span class="cm">/* Build statement and execute query */</span>
    <span class="nc">CassString</span> <span class="n">query</span> <span class="o">=</span> <span class="nb">cass_string_init</span><span class="p">(</span><span class="s">"SELECT keyspace_name "</span>
                                        <span class="s">"FROM system.schema_keyspaces;"</span><span class="p">);</span>
    <span class="nc">CassStatement</span><span class="o">*</span> <span class="n">statement</span> <span class="o">=</span> <span class="nb">cass_statement_new</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="nc">CassFuture</span><span class="o">*</span> <span class="n">result_future</span> <span class="o">=</span> <span class="nb">cass_session_execute</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">statement</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nb">cass_future_error_code</span><span class="p">(</span><span class="n">result_future</span><span class="p">)</span> <span class="o">==</span> <span class="n">CASS_OK</span><span class="p">)</span> <span class="p">{</span>
      <span class="cm">/* Retrieve result set and iterate over the rows */</span>
      <span class="k">const</span> <span class="nc">CassResult</span><span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">cass_future_get_result</span><span class="p">(</span><span class="n">result_future</span><span class="p">);</span>
      <span class="nc">CassIterator</span><span class="o">*</span> <span class="n">rows</span> <span class="o">=</span> <span class="nb">cass_iterator_from_result</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>

      <span class="k">while</span><span class="p">(</span><span class="nb">cass_iterator_next</span><span class="p">(</span><span class="n">rows</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">const</span> <span class="nc">CassRow</span><span class="o">*</span> <span class="n">row</span> <span class="o">=</span> <span class="nb">cass_iterator_get_row</span><span class="p">(</span><span class="n">rows</span><span class="p">);</span>
        <span class="k">const</span> <span class="nc">CassValue</span><span class="o">*</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">cass_row_get_column_by_name</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="s">"keyspace_name"</span><span class="p">);</span>

        <span class="nc">CassString</span> <span class="n">keyspace_name</span><span class="p">;</span>
        <span class="nb">cass_value_get_string</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">keyspace_name</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"keyspace_name: '%.*s'</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">keyspace_name</span><span class="p">.</span><span class="n">length</span><span class="p">,</span>
                                               <span class="n">keyspace_name</span><span class="p">.</span><span class="n">data</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nb">cass_result_free</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
      <span class="nb">cass_iterator_free</span><span class="p">(</span><span class="n">rows</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="cm">/* Handle error */</span>
      <span class="nc">CassString</span> <span class="n">message</span> <span class="o">=</span> <span class="nb">cass_future_error_message</span><span class="p">(</span><span class="n">result_future</span><span class="p">);</span>
      <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"Unable to run query: '%.*s'</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">message</span><span class="p">.</span><span class="n">length</span><span class="p">,</span>
                                                            <span class="n">message</span><span class="p">.</span><span class="n">data</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nb">cass_statement_free</span><span class="p">(</span><span class="n">statement</span><span class="p">);</span>
    <span class="nb">cass_future_free</span><span class="p">(</span><span class="n">result_future</span><span class="p">);</span>

    <span class="cm">/* Close the session */</span>
    <span class="n">close_future</span> <span class="o">=</span> <span class="nb">cass_session_close</span><span class="p">(</span><span class="n">session</span><span class="p">);</span>
    <span class="nb">cass_future_wait</span><span class="p">(</span><span class="n">close_future</span><span class="p">);</span>
    <span class="nb">cass_future_free</span><span class="p">(</span><span class="n">close_future</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="cm">/* Handle error */</span>
    <span class="nc">CassString</span> <span class="n">message</span> <span class="o">=</span> <span class="nb">cass_future_error_message</span><span class="p">(</span><span class="n">connect_future</span><span class="p">);</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">"Unable to connect: '%.*s'</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">message</span><span class="p">.</span><span class="n">length</span><span class="p">,</span>
                                                        <span class="n">message</span><span class="p">.</span><span class="n">data</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nb">cass_future_free</span><span class="p">(</span><span class="n">connect_future</span><span class="p">);</span>
  <span class="nb">cass_cluster_free</span><span class="p">(</span><span class="n">cluster</span><span class="p">);</span>
  <span class="nb">cass_session_free</span><span class="p">(</span><span class="n">session</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<h2 id="license">License<a class="anchor" href="#license" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>

<p>Copyright © 2014-2015 DataStax</p>

<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>


        </div>
        <div class="col-md-3">
          <div id="navigation" class="panel-group side-nav" data-spy="affix" data-offset-top="60" data-offset-bottom="80" role="tablist" aria-multiselectable="true">
            <div id="table-of-contents-panel" class="panel panel-default">
              <div id="table-of-contents-heading" class="panel-heading" role="tab">
                <h4 class="panel-title">
                  <a data-toggle="collapse" href="#table-of-contents" aria-expanded="true" aria-controls="table-of-contents">
                    Contents<i class="pull-right glyphicon glyphicon-chevron-up"></i>
                  </a>
                </h4>
              </div>
              <div id="table-of-contents" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="table-of-contents-heading">
                <div class="panel-body">
                  <ol class="nav nav-pills nav-stacked toc">
<li><a href="#functionality">Functionality
</a></li>
<li><a href="#upgrading-from-a-beta-to-a-rc-release">Upgrading from a Beta to a RC Release
</a></li>
<li><a href="#examples">Examples
</a></li>
<li><a href="#a-simple-example">A Simple Example
</a></li>
<li><a href="#license">License
</a></li>
</ol>
                </div>
              </div>
            </div>

            
            <div id="read-more-panel" class="panel panel-default">
              <div id="read-more-heading" class="panel-heading" role="tab">
                <h4 class="panel-title">
                  <a data-toggle="collapse" href="#read-more" aria-expanded="true" aria-controls="read-more">
                    Read More<i class="pull-right glyphicon glyphicon-chevron-up"></i>
                  </a>
                </h4>
              </div>
              <div id="read-more" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="read-more-heading">
                <div class="panel-body">
                  <ol class="nav nav-pills nav-stacked">
                  
                    <li>
                      <a href="api/">API docs</a>
                    </li>
                  
                    <li>
                      <a href="topics/">Getting Started</a>
                    </li>
                  
                  </ol>
                </div>
              </div>
            </div>
            
          </div>
        </div>
      </div>
    </div>

    

    <script src="../js/jquery.js"></script>
    <script src="../js/bootstrap.js"></script>
    <script src="../js/angular.js"></script>
    <script src="../js/mousetrap.js"></script>
    <script src="../js/hotkeys.js"></script>
    <script src="../js/ZeroClipboard.js"></script>
    <script src="../js/lunr.js"></script>
    <script src="../js/app.js"></script>
  </body>
</html>
